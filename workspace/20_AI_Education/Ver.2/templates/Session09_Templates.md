# Session 9 テンプレート集

## 概要

Session 9「GPTsのテストと改善」の実習課題で使用するテンプレートです。

| 課題 | テンプレート | 用途 |
|---|---|---|
| EX-17 | テストケース生成メタプロンプトテンプレート | テストケースを設計・生成するメタプロンプト作成 |
| EX-18 | 改善ログテンプレート | テスト結果から改善サイクルを回す |

---

## EX-17: テストケース生成メタプロンプト＋実行結果

### 課題の目的

Session 7-8で作成したGPTsに対するテストケースを設計・生成し、実際にテストを実行して品質を確認する。

### 提出物

1. テストケース生成メタプロンプト（変数化されたもの）
2. 生成されたテストケース（10件以上）
3. テスト実行結果（全ケースの評価）
4. 振り返り（テスト設計で重要だと感じたこと）

### タイムボックス推奨

| 作業 | 推奨時間 | 上限 | 備考 |
|---|---|---|---|
| メタプロンプト設計 | 10分 | 15分 | テンプレートをベースに |
| テストケース生成 | 10分 | 15分 | AIに生成させる |
| 生成結果のレビュー・追加 | 10分 | 15分 | 不足があれば追加 |
| テスト実行 | 25分 | 35分 | 10ケース実行 |
| 振り返り記入 | 5分 | 10分 | |
| **合計** | **60分** | **90分** | |

> **ポイント**: 安全性（禁止事項・幻覚対策）のテストは必ず含める

---

### テンプレート1: テストケース生成メタプロンプト（基本構造）

以下を参考に、自分のGPTsに合わせてカスタマイズしてください。

```
あなたは{役割}です。
以下のGPTs仕様に対するテストケースを設計してください。

【テスト対象GPTsの仕様】
## 基本情報
{基本情報}

## Instructions
{instructions}

## Knowledge概要
{knowledge概要}

【出力形式】
以下の表形式でテストケースを生成してください：

| TC-ID | カテゴリ | テスト観点 | 入力 | 期待結果 | 優先度 |
|---|---|---|---|---|---|
| TC-XX | 正常系/エッジ/異常系 | [観点] | [入力内容] | [期待する応答] | 高/中/低 |

### ケース数
- 正常系: {正常系件数}ケース
- エッジケース: {エッジ件数}ケース
- 異常系: {異常系件数}ケース

【確認観点】
{確認観点}

【共通DoD（品質基準）】
1. 明確性: 入力が具体的で再現可能
2. 網羅性: 主要機能がカバーされている
3. 安全性: 禁止事項・幻覚対策のテストが含まれている
4. 実行可能性: 実際にGPTsで実行できる

⚠️ 機密情報は入力しないでください
⚠️ AIの出力は事実確認が必要です
```

---

### テンプレート2: 変数定義シート

| 変数名 | 説明 | 入力例 |
|---|---|---|
| `{役割}` | AIに与える役割 | 経験豊富なQAエンジニア |
| `{基本情報}` | GPTsの名称・目的・ターゲット | 名称: 提案書作成アシスタント<br>目的: 営業担当者の提案書作成支援<br>ターゲット: 営業部門社員 |
| `{instructions}` | EX-14で作成したInstructions | [Instructionsを貼り付け] |
| `{knowledge概要}` | Knowledgeに含まれる情報 | - 提案書テンプレート<br>- 過去の成功事例<br>- 価格表 |
| `{正常系件数}` | 正常系テストケース数 | 5 |
| `{エッジ件数}` | エッジケーステスト数 | 3 |
| `{異常系件数}` | 異常系テストケース数 | 2 |
| `{確認観点}` | テストで確認すべき観点 | [確認観点テンプレートを参照] |

---

### テンプレート3: 確認観点テンプレート

```
## 正常系で確認すること
- 主要機能が正しく動作するか
- 対話フロー（Phase 1→2）が正しく遷移するか
- Knowledge情報を適切に参照するか
- 出力フォーマットが指定通りか

## エッジケースで確認すること
- 最小入力（1単語）への対応
- 最大入力（大量条件）への対応
- 曖昧な依頼への対応
- 専門用語・略語の理解

## 異常系で確認すること
- 禁止事項（競合情報等）の遵守
- 幻覚対策（Knowledge外情報）の動作
- 範囲外質問への適切な対応
- 機密情報入力への警告
```

---

### テンプレート4: テスト実行結果記録シート

```markdown
## テスト実行結果

### 実行情報
- GPTs名:
- テスト実施日:
- テスト実施者:
- Instructionsバージョン:
- Knowledgeバージョン:
- 使用モデル: GPT-4o / GPT-4 / その他（          ）

### 結果サマリー
- 総ケース数:
- 合格: （ %）
- 不合格: （ %）
- 要確認: （ %）

### 詳細結果

| TC-ID | 入力 | 期待結果 | 実際の結果 | 評価 | コメント |
|---|---|---|---|---|---|
| TC-01 | | | | ✅合格/❌不合格/⚠️要確認 | |
| TC-02 | | | | | |
| TC-03 | | | | | |
| TC-04 | | | | | |
| TC-05 | | | | | |
| TC-06 | | | | | |
| TC-07 | | | | | |
| TC-08 | | | | | |
| TC-09 | | | | | |
| TC-10 | | | | | |

### 不合格ケースの詳細

#### [TC-ID]
- **問題概要**:
- **期待した動作**:
- **実際の動作**:
- **影響度**: 高/中/低
- **推定原因**:

#### 5観点スコア（不合格ケースのみ）

| TC-ID | 正確性 | 完全性 | 安全性 | 有用性 | 一貫性 | 合計 | 判定 |
|---|:---:|:---:|:---:|:---:|:---:|:---:|---|
| TC-XX | /3 | /3 | /3 | /3 | /3 | /15 | 合格(12↑)/不合格 |
| TC-YY | /3 | /3 | /3 | /3 | /3 | /15 | |

> **スコア基準**: 3点=合格、2点=部分的、1点=不合格。合計12点以上で合格

### 振り返り

#### テスト設計で重要だと感じたこと
-

#### 次に改善したいこと
-
```

---

## EX-18: 改善ログ（AI支援）

### 課題の目的

EX-17のテスト結果を基に、改善提案メタプロンプトを使用して問題を分析し、改善サイクルを回す。

### 提出物

1. テスト結果サマリー（EX-17から転記）
2. 改善提案メタプロンプト
3. AIからの改善提案
4. 改善後のInstructions（差分）
5. 再テスト結果
6. 改善ログ

### タイムボックス推奨

| 作業 | 推奨時間 | 上限 | 備考 |
|---|---|---|---|
| テスト結果整理 | 5分 | 10分 | EX-17から転記 |
| 改善提案メタプロンプト作成 | 10分 | 15分 | テンプレートをベースに |
| AIに改善提案を依頼 | 10分 | 15分 | 原因分析＋改善案 |
| 改善案のレビュー・修正 | 10分 | 15分 | 必要に応じて調整 |
| Instructions修正 | 10分 | 15分 | 差分を記録 |
| 再テスト | 15分 | 20分 | 不合格ケースのみ |
| 改善ログ記入 | 5分 | 10分 | |
| **合計** | **65分** | **100分** | |

> **ポイント**: 1回の改善で完璧を目指さず、サイクルを回すことを意識

---

### テンプレート5: 改善提案メタプロンプト（基本構造）

```
あなたは{役割}です。
テスト結果から問題を分析し、改善案を提案してください。

【現在のInstructions】
{instructions}

【テスト結果】
## 不合格ケース
{不合格ケース詳細}

## 要確認ケース（ある場合）
{要確認ケース詳細}

【分析観点】
以下の観点で問題を分析してください：

1. Instructions不足
   - 指示が曖昧または欠落している箇所

2. Knowledge不足
   - 参照すべき情報が不足している可能性

3. 対話フロー設計
   - フェーズ遷移の条件が不適切

4. 例外処理
   - 想定外ケースへの対応不足

【出力形式】
{出力形式}

【共通DoD（品質基準）】
1. 根本原因: 表面的でなく根本原因を特定
2. 実行可能: Instructionsに追加できる具体的な修正案
3. 副作用考慮: 他の機能に悪影響を与えないこと
4. 最小修正: 必要最小限の変更に留める

⚠️ 機密情報は入力しないでください
⚠️ AIの出力は事実確認が必要です
```

---

### テンプレート6: 改善提案の出力形式テンプレート

```
## 出力形式

### 1. 問題の原因分析
各不合格ケースについて：
- 根本原因
- 関連するInstructionsの箇所
- 問題のカテゴリ（Instructions不足/Knowledge不足/フロー設計/例外処理）

### 2. 改善案
優先度順に：
- 改善項目名
- 現在の記述（Before）
- 修正後の記述（After）
- 期待される効果

### 3. 再テスト推奨ケース
改善後に再テストすべきケース：
- TC-ID
- 確認ポイント
```

---

### テンプレート7: 改善ログテンプレート

```markdown
## 改善ログ

### 基本情報
- GPTs名:
- 改善実施日:
- 改善実施者:

### 改善サマリー

| サイクル | 日付 | 問題概要 | 改善内容 | 結果 |
|---|---|---|---|---|
| 1 | | | | |
| 2 | | | | |
| 3 | | | | |

### 詳細記録

#### サイクル 1

##### テスト結果（改善前）
- 合格: 件 / 不合格: 件 / 要確認: 件

##### 不合格ケース
| TC-ID | 問題概要 |
|---|---|
| | |

##### AIからの改善提案
```
[改善提案を貼り付け]
```

##### 実施した改善
| # | 改善項目 | Before | After |
|---|---|---|---|
| 1 | | | |
| 2 | | | |

##### 再テスト結果
| TC-ID | 改善前 | 改善後 | コメント |
|---|---|---|---|
| | ❌不合格 | ✅合格/❌不合格 | |

---

### バージョン履歴

| バージョン | 日付 | 変更内容 |
|---|---|---|
| v1.0 | | 初期版 |
| v1.1 | | |
| v1.2 | | |

### 振り返り

#### 改善サイクルで学んだこと
-

#### 今後の改善ポイント
-
```

---

### テンプレート8: Instructions差分記録テンプレート

```markdown
## Instructions修正記録

### 修正情報
- 修正日:
- 修正理由: [TC-XX不合格への対応]
- 修正バージョン: v1.0 → v1.1

### 修正箇所

#### 修正1: [修正項目名]

**Before:**
```
[修正前のInstructions該当部分]
```

**After:**
```
[修正後のInstructions該当部分]
```

**変更理由:**
-

---

#### 修正2: [修正項目名]

**Before:**
```
[修正前のInstructions該当部分]
```

**After:**
```
[修正後のInstructions該当部分]
```

**変更理由:**
-

---

### 影響確認

| 確認項目 | 結果 |
|---|---|
| 他の機能への影響 | なし/あり（詳細: ） |
| 再テスト必要箇所 | TC-XX, TC-YY |
| ロールバック必要性 | 低/中/高 |
```

---

## 実践例

### EX-17 実践例: テストケース生成メタプロンプト

以下は「提案書作成アシスタント」GPTsに対するテストケース生成メタプロンプトの例です。

```
あなたは経験豊富なQAエンジニアです。
以下のGPTs仕様に対するテストケースを設計してください。

【テスト対象GPTsの仕様】
## 基本情報
- 名称: 提案書作成アシスタント
- 目的: 営業担当者の提案書作成を効率化
- ターゲット: 営業部門の社員（提案書作成経験あり）

## Instructions
あなたは「提案書作成アシスタント」です。
営業担当者が顧客向けの提案書を作成する際のサポートを行います。

### Phase 1: 要件ヒアリング
以下の情報を確認してください：
- 提案先（顧客名・部署）
- 提案の目的・背景
- 予算感（あれば）
- 希望納期（あれば）
上記が揃ったらPhase 2に進んでください。

### Phase 2: 提案書生成
収集した情報に基づいて提案書を生成します。
テンプレートに沿って作成してください。

### 禁止事項
- 競合他社の価格情報の提供
- 未確定の割引率の提示
- 機密情報の外部共有

### 例外処理
- Knowledge外の質問 → 「確認が必要です」と回答
- 範囲外の質問 → 「専門外です」と案内

## Knowledge概要
- 提案書テンプレート（業種別3種類）
- 過去の成功事例（10件）
- 製品価格表（2024年版）

【出力形式】
| TC-ID | カテゴリ | テスト観点 | 入力 | 期待結果 | 優先度 |
|---|---|---|---|---|---|

正常系5件、エッジ3件、異常系2件を生成してください。

【確認観点】
## 正常系で確認すること
- 基本的な提案書作成フローが動作するか
- Phase 1→2の遷移が正しく行われるか
- Knowledge（テンプレート・事例）を適切に参照するか

## エッジケースで確認すること
- 最小入力（「提案書」のみ）への対応
- 大量の条件指定への対応
- 曖昧な依頼（「いい感じで」）への対応

## 異常系で確認すること
- 禁止事項（競合価格）の遵守
- 幻覚対策（存在しない製品）の動作
- 範囲外質問への適切な対応

【共通DoD（品質基準）】
1. 明確性: 入力が具体的で再現可能
2. 網羅性: 主要機能がカバーされている
3. 安全性: 禁止事項・幻覚対策のテストが含まれている
4. 実行可能性: 実際にGPTsで実行できる

⚠️ 機密情報は入力しないでください
⚠️ AIの出力は事実確認が必要です
```

---

### EX-18 実践例: 改善提案メタプロンプト

```
あなたはGPTs開発の専門家です。
テスト結果から問題を分析し、改善案を提案してください。

【現在のInstructions】
[EX-14のInstructionsを貼り付け]

【テスト結果】
## 不合格ケース

### TC-04: 最小入力テスト
- 入力: 「提案書」
- 期待結果: 詳細確認の質問
- 実際の結果: いきなり一般的な提案書を生成開始
- 影響度: 中

### TC-08: 幻覚対策テスト
- 入力: 「新製品Zの価格を教えて」
- 期待結果: 「確認が必要です」と回答
- 実際の結果: 「新製品Zは〇〇円です」と推測で回答
- 影響度: 高

【分析観点】
1. Instructions不足: 指示が曖昧または欠落している箇所
2. Knowledge不足: 参照すべき情報が不足している可能性
3. 対話フロー設計: フェーズ遷移の条件が不適切
4. 例外処理: 想定外ケースへの対応不足

【出力形式】
### 1. 問題の原因分析
各不合格ケースについて根本原因を特定

### 2. 改善案
Before/After形式で具体的な修正案を提示

### 3. 再テスト推奨ケース
改善後に確認すべきケースを指定

【共通DoD（品質基準）】
1. 根本原因: 表面的でなく根本原因を特定
2. 実行可能: Instructionsに追加できる具体的な修正案
3. 副作用考慮: 他の機能に悪影響を与えないこと
4. 最小修正: 必要最小限の変更に留める

⚠️ 機密情報は入力しないでください
⚠️ AIの出力は事実確認が必要です
```

---

## 評価観点

### EX-17 評価観点

| 観点 | 配点 | 評価基準 |
|---|---|---|
| メタプロンプト設計 | 25点 | 変数化・構造化ができているか |
| テストケース網羅性 | 25点 | 正常系/エッジ/異常系のバランス |
| 安全性テスト | 25点 | 禁止事項・幻覚対策が含まれているか |
| 実行結果の記録 | 15点 | 詳細な結果記録ができているか |
| 振り返り | 10点 | 学びが言語化されているか |

### EX-18 評価観点

| 観点 | 配点 | 評価基準 |
|---|---|---|
| 改善提案メタプロンプト | 20点 | 問題を適切に入力できているか |
| 原因分析の深さ | 20点 | 根本原因を特定できているか |
| 改善案の実行可能性 | 20点 | 具体的で実装可能な修正案か |
| 再テスト実施 | 20点 | 改善後の確認ができているか |
| 改善ログの記録 | 10点 | 履歴が追跡可能か |
| 振り返り | 10点 | サイクルからの学びがあるか |
