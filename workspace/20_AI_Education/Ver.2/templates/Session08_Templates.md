# Session 8 テンプレート集

## 概要

Session 8「知識ベースの構築」の実習課題で使用するテンプレートです。

| 課題 | テンプレート | 用途 |
|---|---|---|
| EX-15 | 知識ベース設計メタプロンプトテンプレート | 知識ベースを設計するメタプロンプト作成 |
| EX-16 | 知識ファイル評価シート | 生成結果の品質評価 |

---

## EX-15: 知識ベース設計メタプロンプト作成

### 課題の目的

Session 6-7で作成したGPTs企画書・Instructionsを入力として、知識ベースを設計・生成するメタプロンプトを作成する。

### 提出物

1. 知識ベース設計メタプロンプト（変数化されたもの）
2. 変数定義シート（各変数の説明）
3. 動作確認ログ（Phase 1-2の対話）
4. 振り返り（知識ベース設計で重要だと感じたこと）

### タイムボックス推奨

| 作業 | 推奨時間 | 上限 | 備考 |
|---|---|---|---|
| メタプロンプト設計 | 15分 | 20分 | テンプレートをベースに |
| 変数定義シート作成 | 10分 | 15分 | 3-5変数に絞る |
| 動作確認（Phase 1-2） | 20分 | 30分 | 設計書生成まで |
| 振り返り記入 | 10分 | 15分 | |
| **合計** | **55分** | **80分** | |

> **ポイント**: Phase 2（設計書生成）まで完了させる。ファイル生成はEX-16で行う

---

### テンプレート1: 知識ベース設計メタプロンプト（基本構造）

以下を参考に、自分の業務に合わせてカスタマイズしてください。

```
あなたは{役割}です。
以下の情報に基づき、GPTs用の知識ベースを設計・生成してください。

【入力情報】
## GPTs企画書
{企画書}

## Instructions（参考）
{instructions}

【Phase 1: 設計ヒアリング】
以下のサイクルを繰り返してください：
1. まとめ: 入力情報を整理
2. 提案: 知識ベース構成案を提示
3. 質問: 不明点・追加情報を確認

私が「OK」と言ったらPhase 2に進んでください。

確認観点:
{確認観点}

【共通DoD（品質基準）】
1. 構造品質: チャンク設計に沿っているか
2. 検索最適化: キーワード・同義語が適切か
3. 自己完結性: 各チャンクが単独で意味を成すか
4. 幻覚対策: 範囲が明示されているか
5. 実用性: このまま使える品質か

【Phase 2: 設計書生成】
確定した方針に基づいて知識ベース設計書を生成してください。

設計書の内容:
{設計書形式}

作成後、以下のサイクルを繰り返してください：
1. まとめ: 設計書の概要を説明
2. 提案: 改善できる点を提示
3. 質問: 修正の方向性を確認

私が「OK」と言ったらPhase 3に進んでください。

【Phase 3: 知識ファイル生成】
設計書に基づいて知識ファイルを生成してください。

生成ルール:
{生成ルール}

私が「次へ」と言ったら次のファイルを生成
私が「完了」と言ったら終了

⚠️ 機密情報は入力しないでください
⚠️ AIの出力は事実確認が必要です
```

---

### テンプレート2: 変数定義シート

| 変数名 | 説明 | デフォルト値 |
|---|---|---|
| {役割} | AIが演じるペルソナ | 知識ベース設計のエキスパート |
| {企画書} | Session 6で作成したGPTs企画書（EX-12） | （ユーザーが入力） |
| {instructions} | Session 7で作成したInstructions（EX-14） | （ユーザーが入力） |
| {確認観点} | Phase 1で確認する項目リスト | 下記参照 |
| {設計書形式} | 設計書の構成 | 下記参照 |
| {生成ルール} | ファイル生成時のルール | 下記参照 |

#### {確認観点} のデフォルト値

```
- 対象GPTsの目的と主要機能
- 必要な知識の種類（マニュアル、FAQ、データ等）
- 既存資料の有無と形式
- 情報の機密区分
- 更新頻度の想定
- Instructionsの例外処理との連携
```

#### {設計書形式} のデフォルト値

```
# 知識ベース設計書

## 1. 概要
- 対象GPTs名
- 知識ベースの目的
- 総ファイル数

## 2. ファイル一覧
| ファイル名 | 形式 | 内容 | チャンク数 |
|---|---|---|---|

## 3. チャンク設計
| ID | タイトル | 内容 | サイズ目安 |
|---|---|---|---|

## 4. 検索最適化方針
- キーワード戦略
- 同義語対応
- FAQ形式の活用

## 5. 幻覚対策
- 含まれる情報の範囲
- 含まれない情報（推測禁止）
- Instructionsとの連携方法
```

#### {生成ルール} のデフォルト値

```
- 1ファイルずつ順番に生成
- チャンク設計に沿った構造
- 検索最適化を適用（キーワード、同義語、FAQ形式）
- 冒頭に幻覚対策を配置（範囲明示）
- メタデータ（category, tags, updated）を付与
```

> ⚠️ **注意**: DoD（品質基準）とガードレールは**固定項目**です。変数化せず、テンプレートに固定で含めてください。

---

### テンプレート3: 完成例（参考）

```
あなたは知識ベース設計のエキスパートです。
以下の情報に基づき、GPTs用の知識ベースを設計・生成してください。

【入力情報】
## GPTs企画書
（ここにEX-12で作成した企画書を貼り付け）

## Instructions（参考）
（ここにEX-14で作成したInstructionsを貼り付け）

【Phase 1: 設計ヒアリング】
以下のサイクルを繰り返してください：
1. まとめ: 入力情報を整理
2. 提案: 知識ベース構成案を提示
3. 質問: 不明点・追加情報を確認

私が「OK」と言ったらPhase 2に進んでください。

確認観点:
- 対象GPTsの目的と主要機能
- 必要な知識の種類（マニュアル、FAQ、データ等）
- 既存資料の有無と形式
- 情報の機密区分
- 更新頻度の想定
- Instructionsの例外処理との連携

【共通DoD（品質基準）】
1. 構造品質: チャンク設計に沿っているか
2. 検索最適化: キーワード・同義語が適切か
3. 自己完結性: 各チャンクが単独で意味を成すか
4. 幻覚対策: 範囲が明示されているか
5. 実用性: このまま使える品質か

【Phase 2: 設計書生成】
確定した方針に基づいて知識ベース設計書を生成してください。

設計書の内容:
# 知識ベース設計書

## 1. 概要
- 対象GPTs名
- 知識ベースの目的
- 総ファイル数

## 2. ファイル一覧
| ファイル名 | 形式 | 内容 | チャンク数 |
|---|---|---|---|

## 3. チャンク設計
| ID | タイトル | 内容 | サイズ目安 |
|---|---|---|---|

## 4. 検索最適化方針
- キーワード戦略
- 同義語対応
- FAQ形式の活用

## 5. 幻覚対策
- 含まれる情報の範囲
- 含まれない情報（推測禁止）
- Instructionsとの連携方法

作成後、以下のサイクルを繰り返してください：
1. まとめ: 設計書の概要を説明
2. 提案: 改善できる点を提示
3. 質問: 修正の方向性を確認

私が「OK」と言ったらPhase 3に進んでください。

【Phase 3: 知識ファイル生成】
設計書に基づいて知識ファイルを生成してください。

生成ルール:
- 1ファイルずつ順番に生成
- チャンク設計に沿った構造
- 検索最適化を適用（キーワード、同義語、FAQ形式）
- 冒頭に幻覚対策を配置（範囲明示）
- メタデータ（category, tags, updated）を付与

私が「次へ」と言ったら次のファイルを生成
私が「完了」と言ったら終了

⚠️ 機密情報は入力しないでください
⚠️ AIの出力は事実確認が必要です
```

---

## EX-16: 知識ファイル（AI生成）

### 課題の目的

EX-15で作成したメタプロンプトを実行し、知識ファイルを生成する。生成物を評価し、改善ループで品質を高める。

### 提出物

1. 使用したメタプロンプト（EX-15のもの）
2. 生成された知識ベース設計書
3. 生成された知識ファイル（1-3ファイル）
4. 評価シート（5観点×5段階）
5. 改善ログ（修正依頼と結果）
6. 振り返り（知識ファイルの品質向上で学んだこと）

### タイムボックス推奨

| 作業 | 推奨時間 | 上限 | 備考 |
|---|---|---|---|
| メタプロンプト実行（Phase 1-2） | 15分 | 20分 | 設計書生成まで |
| メタプロンプト実行（Phase 3） | 20分 | 30分 | ファイル生成 |
| 評価シート記入 | 10分 | 15分 | 5観点で評価 |
| 改善ループ | 20分 | 30分 | 最大3回 |
| 振り返り記入 | 10分 | 15分 | |
| **合計** | **75分** | **110分** | |

> **ポイント**: 改善ループは3回を上限とし、それ以上は振り返りに記録

---

### テンプレート4: 知識ファイルフォーマット（Markdown）

AIに生成させる際の参照フォーマットです。

```markdown
---
category: [カテゴリ名]
tags: [タグ1, タグ2, タグ3]
updated: YYYY-MM-DD
version: v1.0
owner: [管理責任者（部署・氏名）]
approved_by: [承認者（部署・氏名）]
review_cycle: [更新頻度: 月次/四半期/年次/随時]
---

# [ファイルタイトル]

## このファイルについて

### 含まれる情報
- [含まれる情報1]
- [含まれる情報2]
- [含まれる情報3]

### 含まれない情報（推測禁止）
- [含まれない情報1] → [代替案内]
- [含まれない情報2] → [代替案内]

### 更新日・時点
本ファイルは[YYYY年MM月]時点の情報です。

### 運用情報
- 管理責任者: [部署・氏名]
- 次回更新予定: [YYYY-MM-DD]
- 更新トリガー: [新商品追加時/ポリシー変更時/四半期ごと]

---

## [セクション1: トピック名]

### [サブセクション1.1]
[内容]

### [サブセクション1.2]
[内容]

---

## [セクション2: トピック名]
...
```

---

### テンプレート5: 知識ファイルフォーマット（JSON）

FAQ形式のデータに適したフォーマットです。

```json
{
  "metadata": {
    "category": "[カテゴリ名]",
    "updated": "YYYY-MM-DD",
    "version": "v1.0",
    "owner": "[管理責任者（部署・氏名）]",
    "approved_by": "[承認者（部署・氏名）]",
    "review_cycle": "[更新頻度]",
    "scope": "[このファイルの対象範囲]",
    "excluded": [
      "[含まれない情報1]",
      "[含まれない情報2]"
    ]
  },
  "faq": [
    {
      "id": "FAQ001",
      "category": "[サブカテゴリ]",
      "question": "[質問文（同義語を含む）]",
      "answer": "[回答文]",
      "keywords": ["キーワード1", "キーワード2"],
      "related": ["FAQ002", "FAQ003"]
    },
    {
      "id": "FAQ002",
      "category": "[サブカテゴリ]",
      "question": "[質問文]",
      "answer": "[回答文]",
      "keywords": ["キーワード1", "キーワード2"],
      "related": []
    }
  ]
}
```

---

### テンプレート6: 評価シート

生成された知識ファイルを評価するシートです。

```
【EX-16 評価シート】

## 対象ファイル
ファイル名: ____________________

## 5観点評価

| # | 観点 | 評価（1-5） | チェック項目 | コメント |
|---|---|---|---|---|
| 1 | **構造品質** | __ | チャンク設計に沿っているか | |
| 2 | **検索最適化** | __ | キーワード・同義語が適切か | |
| 3 | **自己完結性** | __ | 各チャンクが単独で意味を成すか | |
| 4 | **幻覚対策** | __ | 範囲が明示されているか | |
| 5 | **実用性** | __ | このまま使える品質か | |

## 総合評価
合計点: __/25

判定:
- 20点以上: 合格（そのまま使用可能）
- 15-19点: 改善推奨（1-2点の修正で使用可能）
- 14点以下: 再生成推奨（構造から見直し）

## 優先改善項目（最大3つ）
1. ____________________
2. ____________________
3. ____________________
```

---

### テンプレート7: 構造品質チェックリスト

評価観点1「構造品質」の詳細確認用です。

```
【構造品質チェックリスト】

## ファイル形式
□ 設計書で指定した形式になっているか（Markdown/JSON/CSV）
□ メタデータが付与されているか（category, tags, updated）

## チャンク構造
□ 設計書のチャンク数とおおよそ一致しているか
□ 見出しレベル（H1, H2, H3）が論理的か
□ 各チャンクのサイズが200-2000文字程度か

## 情報の配置
□ 幻覚対策（範囲明示）が冒頭にあるか
□ 関連情報がまとまって配置されているか
□ 重複情報がないか
```

---

### テンプレート8: 検索最適化チェックリスト

評価観点2「検索最適化」の詳細確認用です。

```
【検索最適化チェックリスト】

## キーワード網羅
□ 主要な専門用語が含まれているか
□ 商品名・機能名が正確に記載されているか
□ 略称と正式名称の両方が含まれているか

## 同義語対応
□ 同じ意味の異なる表現が併記されているか
  例: 「返品・キャンセル・解約」「FAQ・よくある質問」
□ ユーザーが使いそうな表現が含まれているか

## FAQ形式
□ 質問形式の見出しがあるか
  例: 「〇〇できますか？」「〇〇とは？」
□ 質問と回答が明確に対応しているか

## メタデータ
□ categoryタグが適切に設定されているか
□ tagsが網羅的か（検索に使われそうなキーワード）
```

---

### テンプレート9: 幻覚対策チェックリスト

評価観点4「幻覚対策」の詳細確認用です。

```
【幻覚対策チェックリスト】

## 範囲の明示
□ 「含まれる情報」が明記されているか
□ 「含まれない情報」が列挙されているか
□ 更新日・時点が記載されているか

## 除外情報の具体性
□ 含まれない情報が具体的か
  NG: 「一部の情報」
  OK: 「在庫状況、法人価格、キャンペーン情報」
□ 代替案内が記載されているか
  例: 「在庫状況 → 営業担当にお問い合わせください」

## Instructionsとの連携
□ EX-14の例外処理と整合しているか
□ 「Knowledge内に該当情報がないため確認が必要です」
  と回答すべき場面が明確か
```

---

### テンプレート10: 改善ログ

改善ループの記録用テンプレートです。

```
【EX-16 改善ログ】

## 改善1回目

### 問題点
[評価シートで特定した問題]

### 修正依頼
[AIへの具体的な修正指示]

### 結果
[修正後の状態]

### 評価
改善された: □はい □一部 □いいえ

---

## 改善2回目

### 問題点
[残っている問題]

### 修正依頼
[AIへの具体的な修正指示]

### 結果
[修正後の状態]

### 評価
改善された: □はい □一部 □いいえ

---

## 改善3回目（最終）

### 問題点
[残っている問題]

### 修正依頼
[AIへの具体的な修正指示]

### 結果
[修正後の状態]

### 評価
改善された: □はい □一部 □いいえ

---

## 残課題（3回で解決できなかった場合）
[振り返りに記録する残課題]
```

---

### テンプレート11: 振り返りシート

```
【EX-16 振り返りシート】

## 1. 生成結果の評価

### 良かった点
- [具体的な良かった点]
- [具体的な良かった点]

### 改善が必要だった点
- [改善点] → [どう修正したか]
- [改善点] → [どう修正したか]

## 2. メタプロンプトの評価

### 効果的だった部分
- [メタプロンプトで効果的だった設計]

### 改善したい部分
- [次回改善したいメタプロンプトの箇所]

## 3. 知識ベース設計で重要だと感じたこと

### 最も重要な学び
[1つ選んで詳しく記述]

### 実務で活かせそうなこと
[具体的な活用シーン]

## 4. 次セッションへの準備

### Session 9で使う成果物
□ GPTs企画書（EX-12）
□ Instructions（EX-14）
□ 知識ファイル（EX-16） ← 今回作成

### 事前確認事項
[Session 9に向けて確認しておくこと]
```

---

## 補足資料

### 知識ベース設計でよくある失敗

企画書・ファイルを最終確認する際に使用してください。

```
【知識ベース設計チェックリスト】

□ ファイル形式が用途に合っているか
  NG: FAQをプレーンテキストで → OK: JSON構造化

□ チャンクが細かすぎないか
  NG: 1文=1チャンク → OK: 1トピック=1チャンク

□ チャンクが大きすぎないか
  NG: 50ページ=1ファイル → OK: 章単位で分割

□ 幻覚対策が含まれているか
  NG: 範囲不明 → OK: 冒頭に「含まれる/含まれない情報」明記

□ 検索最適化されているか
  NG: 単一表現のみ → OK: 同義語・FAQ形式含む

□ 更新可能な設計か
  NG: ハードコードされた日付 → OK: 更新日フィールド
```

---

### Session 6-8の成果物連鎖（確認）

Session 8で作成した知識ファイルは、Session 9「GPTs統合・テスト」で使用します。

```
Session 6の成果物
├── EX-11: GPTs企画メタプロンプト
└── EX-12: GPTs企画書
         ↓
         ↓ Session 7の入力
         ↓
Session 7の成果物
├── EX-13: Instructions生成メタプロンプト
└── EX-14: Instructions v1
         ↓
         ↓ Session 8の入力
         ↓
Session 8の成果物
├── EX-15: 知識ベース設計メタプロンプト
└── EX-16: 知識ファイル v1
         ↓
         ↓ Session 9の入力
         ↓
Session 9の成果物
└── 統合GPTs（Instructions + Knowledge）
```

すべての成果物を大切に保管し、次回のセッションで活用してください。
