# オーケストレーション機能クイックスタート

このガイドでは、Claude/Codex/Geminiがオーケストレーター（指揮者）として自律的に指示を実行する流れを体験できます。ClaudeはSlash Commandを自動実行できますが、Codex/GeminiにはSlash Commandがないため「コマンド内容を自然文で即実行する」運用に読み替えてください。

---

## 🎯 目標

このクイックスタートを完了すると：
- ✅ Claudeが自動的にプロジェクト状態を判定できる
- ✅ Claudeがユーザーの要求から適切なコマンドを選択・実行できる
- ✅ Claudeが次のアクションを先回りして提案・実行できる

---

## 🚀 セットアップ（初回のみ）

### 1. 現在のディレクトリ確認
```bash
pwd
# 出力: .../AI-PM_System_NotebookLMuse
```

### 2. workspace構造の確認
```bash
ls -la workspace/
```

現時点でworkspaceが空、または既存プロジェクトがあることを確認してください。

---

## 📝 テストシナリオ

### シナリオ1: 新規プロジェクト立ち上げ（完全自律）

#### ユーザーの発言
```
新規プロジェクトを始めたい
```

#### 期待されるオーケストレーターの動作

**Step 1: 自律的な状態確認**
```
Claude: workspace/を確認します...
[自動的に ls workspace/ を実行]
Codex/Gemini: 「workspace/を確認します」と宣言し、必要なら ls workspace/ を実行
```

**Step 2: 自律的なコマンド実行**
```
Claude: 「新規プロジェクトの立ち上げをサポートします。
         プロジェクト憲章を作成しましょう。
         プロジェクト名を教えてください。」
Codex/Gemini: 「プロジェクト憲章を作成します。プロジェクト名は？」と聞き、回答後すぐMarkdownを生成し workspace/<PJ>/docs/ へ保存
```

**Step 3: 情報収集後、即座にドキュメント生成**
```
ユーザー: 「プロジェクトAです」
Claude: [/project-charterを自動実行]
Codex/Gemini: 「プロジェクト憲章を作成しました」と出力し、ファイル保存
        「次に要件定義書を作成します。」
```

**Step 4: 連鎖実行**
```
Claude: [/requirementsを自動実行]
Codex/Gemini: 連続で要件定義書を生成し保存
        「要件定義書を作成しました。
         リスク登録簿も作成しますか？」
```

#### ✅ 成功基準
- [ ] 「〜しますか？」と聞く前に憲章生成を開始した（ClaudeはSlash Command自動実行、Codex/Geminiは自然文で即生成）
- [ ] 憲章作成後、**自動的に**次のステップ（要件定義）を提案または実行した
- [ ] ユーザーが明示的に指示しなくても、必要なドキュメントを生成した

---

### シナリオ2: 週次レポート作成（キーワード判定）

#### ユーザーの発言
```
今週の進捗を教えて
```

#### 期待されるオーケストレーターの動作

**Step 1: キーワード検出**
```
Claude: [「今週」「進捗」から/weekly-statusを判定]
Codex/Gemini: キーワードをトリガーに「週次レポートを作成します」と宣言し、即生成
```

**Step 2: 自律的な実行**
```
Claude: 「週次レポートを作成します。」
[/weekly-statusを自動実行]
Codex/Gemini: 「週次レポートを作成します」と宣言し、Markdownを生成・保存
```

**Step 3: レポート生成**
```
Claude: 「週次レポートを作成しました。
         主要な課題は...
         次週のアクションは...」
```

#### ✅ 成功基準
- [ ] 「週次レポートを作成しますか？」と聞かずに、**即座に**生成した
- [ ] キーワード「今週」「進捗」から適切な処理を選択した

---

### シナリオ3: 経営戦略立案（曖昧な要求への対応）

#### ユーザーの発言
```
来期の戦略を考えたい
```

#### 期待されるオーケストレーターの動作

**Step 1: 要求の解釈**
```
Claude: [「来期」「戦略」から/corporate-strategyを判定]
Codex/Gemini: 「経営戦略ドキュメントを作成します」と宣言し、必要情報を質問
```

**Step 2: 自律的な実行**
```
Claude: 「経営戦略の策定を開始します。
         現在の事業状況を教えてください。」
Codex/Gemini: 「経営戦略を作成します。現状の事業状況は？」と聞き、回答後すぐ生成
```

**Step 3: 連鎖提案**
```
Claude: [/corporate-strategy完了後]
Codex/Gemini: 経営戦略Markdownを保存後、
        「経営戦略を立案しました。
         人事面での実行計画（採用・育成）も作成しますか？」

ユーザー: 「はい」
Claude: [/hr-strategyを自動実行]
Codex/Gemini: hr戦略Markdownを生成・保存
```

#### ✅ 成功基準
- [ ] 曖昧な「戦略を考えたい」から適切なドキュメント生成を開始した
- [ ] 関連する次のアクション（hr-strategy等）を提案した
- [ ] ユーザーの承認後、即座に次のドキュメントを生成した

---

## 🔍 動作確認チェックリスト

### レベル1: 基本的なオーケストレーション
- [ ] ユーザーが「プロジェクトを始めたい」→ 憲章生成を**自動実行**（ClaudeはSlash Command、Codex/Geminiは即生成）
- [ ] ユーザーが「要件を定義したい」→ 要件定義書を**自動実行**
- [ ] ユーザーが「リスクを管理したい」→ リスク登録簿を**自動実行**

### レベル2: プロアクティブな提案
- [ ] 実行後、**次に必要なアクションを提案**する
- [ ] 会話開始時、workspace/を確認して**プロジェクト状態を報告**する
- [ ] 週次レポートが古い場合、**自動的に更新を提案**する

### レベル3: 連鎖実行
- [ ] プロジェクト立ち上げ時、憲章→要件→リスクを**連続して実行**する
- [ ] 経営戦略立案後、関連する人事/マーケ戦略を**自動提案**する

### レベル4: コンテキスト記憶
- [ ] セッション内でプロジェクト名を記憶し、**次の会話で活用**する
- [ ] 前回の処理から、**次に必要な処理を推測**する

---

## 🐛 トラブルシューティング

### 問題1: オーケストレーターが自動実行しない

**症状:**
```
ユーザー: 「プロジェクトを始めたい」
Claude/Codex/Gemini: 「プロジェクト憲章を作成しますか？」← ❌ 聞くだけ
```

**原因:** オーケストレーションロジックを認識していない／Slash Command非対応環境

**解決策:**
```
ユーザー: 「あなたはオーケストレーターです。
           CLAUDE.md（CodexはCODEX.md）と.agent/ORCHESTRATION_GUIDE.mdを読み込み、
           自律的にドキュメント生成を実行してください。」
```

### 問題2: 会話開始時にプロジェクト状態を確認しない

**症状:** 何も提案せず、待機している

**原因:** 初期化フローを実行していない

**解決策:**
```
ユーザー: 「会話開始時の初期化フローを実行してください。
           workspace/を確認し、プロジェクト状態を報告してください。」
```

### 問題3: 一つの処理だけ実行して停止する

**症状:**
```
Claude: [/project-charterを実行]
        「プロジェクト憲章を作成しました。」← ここで停止
```

**原因:** 連鎖実行ロジックが不足

**解決策:**
```
ユーザー: 「次に必要なステップを自動的に提案・実行してください。」
```

---

## 📊 オーケストレーション成熟度の確認

### レベル0: 手動実行（目標ではない）
```
ユーザー: /project-charter
Claude: [コマンド実行]
```

### レベル1: 提案型（最低ライン）
```
ユーザー: 「プロジェクトを始めたい」
Claude: 「プロジェクト憲章を作成しますか？」
ユーザー: 「はい」
Claude: [コマンド実行]
```

### ✅ レベル2: 自律実行（目標）
```
ユーザー: 「プロジェクトを始めたい」
Claude: 「プロジェクト憲章を作成します」
Claude: [自動的にコマンド実行]
Claude: 「次に要件定義書を作成します」
```

### ⭐ レベル3: 完全自律（理想）
```
ユーザー: 「新規プロジェクト」
Claude: [workspace/を自動確認]
Claude: [必要な全ドキュメントを自動生成]
Claude: 「プロジェクトXXXの立ち上げが完了しました」
```

**このシステムは レベル2-3 を目指します。**

---

## 🎓 次のステップ

オーケストレーション機能を習得したら：

1. **実際のプロジェクトで使用**
   - 実プロジェクトでプロジェクト憲章を作成
   - 週次レポートを自動生成
   - 議事録を自動作成

2. **カスタマイズ**
   - `.claude/commands/` のテンプレートを組織に合わせて調整
   - `.agent/ORCHESTRATION_GUIDE.md` にプロジェクト固有のルールを追加

3. **NotebookLM連携**
   - NotebookLMを設定して、過去ドキュメントからの自動情報取得を実現（Codex/Geminiは `.agent/skills/business/notebooklm` のPythonスクリプトを直接実行。ネットワーク/ブラウザ許可が必要）
   - 週次レポート作成時に全ノートブックから自動的に情報収集

---

## 💡 ベストプラクティス

### ✅ 推奨される使い方

**良い例1: 曖昧な要求でも動作**
```
ユーザー: 「何か始めたい」
Claude: [workspace/を確認]
        「新規プロジェクトを立ち上げますか？
         または経営戦略を策定しますか？」
```

**良い例2: プロアクティブな提案**
```
ユーザー: 「今日は何をすべき？」
Claude: [曜日と最終更新を確認]
        「月曜日ですので、週次レポートを作成します」
        [/weekly-statusを自動実行]
```

### ❌ 避けるべき使い方

**悪い例1: 受動的**
```
Claude: 「何かお手伝いできることはありますか？」← ❌
```

**悪い例2: 毎回確認**
```
Claude: 「プロジェクト憲章を作成しますか？」← ❌
```

---

## 📞 サポート

問題が発生した場合：

1. `CLAUDE.md` を再度読み込ませる
2. `.agent/ORCHESTRATION_GUIDE.md` を参照する
3. このドキュメント（`QUICKSTART_ORCHESTRATION.md`）のトラブルシューティングを確認

---

オーケストレーション機能を使いこなして、効率的なプロジェクトマネジメントを実現しましょう！
